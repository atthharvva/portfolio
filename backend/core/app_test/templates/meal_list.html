{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ category_display }} - {{ diet_display }}</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<style>
@keyframes gradientMove {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.gradient-text {
  background-size: 300% 300%;
  animation: gradientMove 8s ease infinite;
}

.blob {
  position: absolute;
  border-radius: 9999px;
  filter: blur(140px);
  opacity: 0.4;
  animation: float 20s infinite ease-in-out;
  pointer-events: none;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(30px, -50px) rotate(120deg); }
  66% { transform: translate(-20px, 30px) rotate(240deg); }
}

.meal-card {
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  cursor: pointer;
}

.meal-card:hover {
  transform: translateY(-15px) scale(1.02);
  box-shadow: 0 30px 80px rgba(99, 102, 241, 0.4);
}

.back-button {
  position: fixed;
  top: 30px;
  left: 30px;
  z-index: 100;
  padding: 12px 24px;
  background: rgba(30, 41, 59, 0.95);
  border: 2px solid rgba(99, 102, 241, 0.3);
  border-radius: 50px;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.back-button:hover {
  background: rgba(99, 102, 241, 0.2);
  border-color: rgba(99, 102, 241, 0.5);
  transform: translateX(-5px);
}

.progress-bar {
  position: fixed;
  top: 0;
  left: 0;
  height: 4px;
  background: linear-gradient(90deg, #6366f1, #a855f7, #06b6d4);
  z-index: 9999;
  transform-origin: left;
}
</style>

</head>

<body class="bg-slate-950 text-slate-200 antialiased overflow-x-hidden">

<!-- Progress Bar -->
<div class="progress-bar" id="progressBar"></div>

<!-- Background Blobs -->
<div class="blob w-[600px] h-[600px] bg-purple-600 top-[-200px] left-[-200px]"></div>
<div class="blob w-[500px] h-[500px] bg-cyan-500 bottom-[-200px] right-[-200px]"></div>

<!-- Back Button -->
<a href="/gymbuddy/mealPrep/" class="back-button flex items-center gap-2 text-white font-semibold">
  <span>‚Üê</span>
  <span>Back</span>
</a>

<!-- Main Content -->
<section class="min-h-screen px-6 py-32 relative z-10">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="text-center mb-16" data-aos="fade-up">
      
      <!-- Diet Badge -->
      <div class="inline-block px-6 py-3 rounded-full bg-white/10 border border-white/20 
                  backdrop-blur-xl mb-6">
        <span class="text-lg">{{ diet_icon }}</span>
        <span class="text-lg font-semibold ml-2">{{ diet_display }}</span>
      </div>

      <!-- Title -->
      <h1 class="text-5xl sm:text-6xl font-extrabold mb-4">
        <span class="gradient-text bg-gradient-to-r from-indigo-400 via-purple-400 to-cyan-400 
                     bg-clip-text text-transparent">
          {{ category_display }} Recipes
        </span>
      </h1>
      
      <p class="text-xl text-slate-300">Delicious, healthy, and high-protein meals</p>
    </div>

    <!-- Meals Grid -->
    {% if meals %}
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      
      {% for meal in meals %}
      <div class="meal-card p-6 rounded-3xl border-2 border-white/10 backdrop-blur-sm
                  bg-gradient-to-br from-white/5 to-white/10 hover:border-indigo-400/50"
           data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'100' }}"
           onclick="window.location.href='/gymbuddy/meal/{{ meal.id }}/'">
        
        <!-- Image -->
        <div class="relative mb-6 rounded-2xl overflow-hidden h-48 bg-gradient-to-br from-indigo-500/20 to-purple-500/20">
          {% if meal.image %}
          <img src="{{ meal.image.url }}" 
               alt="{{ meal.name }}" 
               class="w-full h-full object-cover">
          {% else %}
          <div class="w-full h-full flex items-center justify-center text-6xl">
            üçΩÔ∏è
          </div>
          {% endif %}
          
          <!-- Difficulty Badge -->
          <div class="absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold
                      {% if meal.difficulty == 'easy' %}bg-green-500/90
                      {% elif meal.difficulty == 'medium' %}bg-yellow-500/90
                      {% else %}bg-red-500/90{% endif %}">
            {{ meal.get_difficulty_display }}
          </div>
        </div>

        <!-- Meal Name -->
        <h3 class="text-2xl font-bold text-white mb-3">{{ meal.name }}</h3>

        <!-- Description -->
        <p class="text-slate-400 text-sm mb-4 line-clamp-2">
          {{ meal.description }}
        </p>

        <!-- Macros -->
        <div class="grid grid-cols-4 gap-2 mb-4">
          <div class="text-center p-2 rounded-lg bg-white/5">
            <div class="text-lg font-bold text-indigo-400">{{ meal.calories }}</div>
            <div class="text-xs text-slate-400">Cal</div>
          </div>
          <div class="text-center p-2 rounded-lg bg-white/5">
            <div class="text-lg font-bold text-green-400">{{ meal.protein }}g</div>
            <div class="text-xs text-slate-400">Protein</div>
          </div>
          <div class="text-center p-2 rounded-lg bg-white/5">
            <div class="text-lg font-bold text-yellow-400">{{ meal.carbs }}g</div>
            <div class="text-xs text-slate-400">Carbs</div>
          </div>
          <div class="text-center p-2 rounded-lg bg-white/5">
            <div class="text-lg font-bold text-orange-400">{{ meal.fats }}g</div>
            <div class="text-xs text-slate-400">Fats</div>
          </div>
        </div>

        <!-- Time & Servings -->
        <div class="flex justify-between items-center text-sm text-slate-400">
          <span>‚è±Ô∏è {{ meal.total_time }} min</span>
          <span>üçΩÔ∏è {{ meal.servings }} servings</span>
        </div>

        <!-- View Recipe Button -->
        <div class="mt-4 pt-4 border-t border-white/10">
          <div class="flex items-center justify-between">
            <span class="text-indigo-400 font-semibold">View Recipe</span>
            <span class="text-indigo-400">‚Üí</span>
          </div>
        </div>

      </div>
      {% endfor %}

    </div>
    {% else %}
    
    <!-- No Meals Found -->
    <div class="text-center py-20" data-aos="fade-up">
      <div class="text-8xl mb-6">üçΩÔ∏è</div>
      <h3 class="text-3xl font-bold text-white mb-4">No Recipes Yet</h3>
      <p class="text-slate-400 mb-8">We're working on adding delicious recipes for this category!</p>
      <a href="/gymbuddy/mealPrep/" 
         class="inline-block px-8 py-4 rounded-xl border-2 border-white/30
                hover:bg-white/10 hover:border-white/50 transition-all">
        ‚Üê Go Back
      </a>
    </div>
    
    {% endif %}

  </div>
</section>

<!-- Scripts -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
AOS.init({
  duration: 1000,
  once: true,
  offset: 100,
  easing: 'ease-out-cubic'
});

window.addEventListener('scroll', () => {
  const winScroll = document.documentElement.scrollTop;
  const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  const scrolled = (winScroll / height) * 100;
  document.getElementById('progressBar').style.width = scrolled + '%';
});
</script>

</body>
</html>